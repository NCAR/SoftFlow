#!/bin/bash
#SBATCH -N 1
#SBATCH -C knl,quad,flat
#SBATCH -L SCRATCH
#SBATCH -p regular
#SBATCH -J myjob
#SBATCH --mail-user=youngsun@ucar.edu
#SBATCH -t 00:30:00

#OpenMP settings:
export OMP_NUM_THREADS=2
export OMP_PLACES=threads
export OMP_PROC_BIND=spread

ulimit -s unlimited

#run the application:
srun -n 36 -c 4 --cpu_bind=cores numactl -p 1 $1 < $2
